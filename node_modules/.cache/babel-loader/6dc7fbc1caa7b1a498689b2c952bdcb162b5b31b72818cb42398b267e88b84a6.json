{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\91989\\\\Desktop\\\\SRMLAB - Copy\\\\react-version\\\\src\\\\components\\\\ProtectedRoute.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { supabase } from '../supabaseClient';\nimport { useNavigate, Navigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProtectedRoute = ({\n  children\n}) => {\n  _s();\n  const [loading, setLoading] = useState(true);\n  const [user, setUser] = useState(null);\n  const navigate = useNavigate();\n  useEffect(() => {\n    const checkUser = async () => {\n      try {\n        var _user$email;\n        const {\n          data: {\n            session\n          },\n          error\n        } = await supabase.auth.getSession();\n        if (error) {\n          console.error('Session error:', error);\n          setLoading(false);\n          return;\n        }\n        if (!session) {\n          setLoading(false);\n          return;\n        }\n        const {\n          data: {\n            user\n          }\n        } = await supabase.auth.getUser();\n        if (!user || !((_user$email = user.email) !== null && _user$email !== void 0 && _user$email.endsWith('@srmist.edu.in'))) {\n          await supabase.auth.signOut();\n          setLoading(false);\n          return;\n        }\n        setUser(user);\n        setLoading(false);\n      } catch (error) {\n        console.error('Error checking auth status:', error);\n        setLoading(false);\n      }\n    };\n    checkUser();\n    const {\n      data: {\n        subscription\n      }\n    } = supabase.auth.onAuthStateChange(async (event, session) => {\n      if (event === 'SIGNED_IN' && session) {\n        var _user$email2;\n        const {\n          data: {\n            user\n          }\n        } = await supabase.auth.getUser();\n        if (user !== null && user !== void 0 && (_user$email2 = user.email) !== null && _user$email2 !== void 0 && _user$email2.endsWith('@srmist.edu.in')) {\n          setUser(user);\n        } else {\n          await supabase.auth.signOut();\n        }\n      } else if (event === 'SIGNED_OUT') {\n        setUser(null);\n      }\n      setLoading(false);\n    });\n    return () => {\n      if (subscription) subscription.unsubscribe();\n    };\n  }, []);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n        height: '100vh',\n        background: '#f0f2f5'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          marginTop: '1rem',\n          color: '#666'\n        },\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n        jsx: true,\n        children: `\n          .loading-spinner {\n            width: 40px;\n            height: 40px;\n            border: 3px solid #f3f3f3;\n            border-top: 3px solid #1a73e8;\n            border-radius: 50%;\n            animation: spin 1s linear infinite;\n          }\n          @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n        `\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this);\n  }\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/auth\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 12\n    }, this);\n  }\n  return children;\n};\n_s(ProtectedRoute, \"O4T3FskevH4wxCXSUTAcgMG6ioM=\", false, function () {\n  return [useNavigate];\n});\n_c = ProtectedRoute;\nexport default ProtectedRoute;\nvar _c;\n$RefreshReg$(_c, \"ProtectedRoute\");","map":{"version":3,"names":["useEffect","useState","supabase","useNavigate","Navigate","jsxDEV","_jsxDEV","ProtectedRoute","children","_s","loading","setLoading","user","setUser","navigate","checkUser","_user$email","data","session","error","auth","getSession","console","getUser","email","endsWith","signOut","subscription","onAuthStateChange","event","_user$email2","unsubscribe","style","display","flexDirection","justifyContent","alignItems","height","background","className","fileName","_jsxFileName","lineNumber","columnNumber","marginTop","color","jsx","to","replace","_c","$RefreshReg$"],"sources":["C:/Users/91989/Desktop/SRMLAB - Copy/react-version/src/components/ProtectedRoute.js"],"sourcesContent":["import { useEffect, useState } from 'react'\r\nimport { supabase } from '../supabaseClient'\r\nimport { useNavigate, Navigate } from 'react-router-dom'\r\n\r\nconst ProtectedRoute = ({ children }) => {\r\n  const [loading, setLoading] = useState(true)\r\n  const [user, setUser] = useState(null)\r\n  const navigate = useNavigate()\r\n\r\n  useEffect(() => {\r\n    const checkUser = async () => {\r\n      try {\r\n        const { data: { session }, error } = await supabase.auth.getSession()\r\n        \r\n        if (error) {\r\n          console.error('Session error:', error)\r\n          setLoading(false)\r\n          return\r\n        }\r\n        \r\n        if (!session) {\r\n          setLoading(false)\r\n          return\r\n        }\r\n\r\n        const { data: { user } } = await supabase.auth.getUser()\r\n        if (!user || !user.email?.endsWith('@srmist.edu.in')) {\r\n          await supabase.auth.signOut()\r\n          setLoading(false)\r\n          return\r\n        }\r\n\r\n        setUser(user)\r\n        setLoading(false)\r\n      } catch (error) {\r\n        console.error('Error checking auth status:', error)\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    checkUser()\r\n\r\n    const { data: { subscription } } = supabase.auth.onAuthStateChange(async (event, session) => {\r\n      if (event === 'SIGNED_IN' && session) {\r\n        const { data: { user } } = await supabase.auth.getUser()\r\n        if (user?.email?.endsWith('@srmist.edu.in')) {\r\n          setUser(user)\r\n        } else {\r\n          await supabase.auth.signOut()\r\n        }\r\n      } else if (event === 'SIGNED_OUT') {\r\n        setUser(null)\r\n      }\r\n      setLoading(false)\r\n    })\r\n\r\n    return () => {\r\n      if (subscription) subscription.unsubscribe()\r\n    }\r\n  }, [])\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{ \r\n        display: 'flex', \r\n        flexDirection: 'column',\r\n        justifyContent: 'center', \r\n        alignItems: 'center', \r\n        height: '100vh',\r\n        background: '#f0f2f5'\r\n      }}>\r\n        <div className=\"loading-spinner\"></div>\r\n        <p style={{ marginTop: '1rem', color: '#666' }}>Loading...</p>\r\n        <style jsx>{`\r\n          .loading-spinner {\r\n            width: 40px;\r\n            height: 40px;\r\n            border: 3px solid #f3f3f3;\r\n            border-top: 3px solid #1a73e8;\r\n            border-radius: 50%;\r\n            animation: spin 1s linear infinite;\r\n          }\r\n          @keyframes spin {\r\n            0% { transform: rotate(0deg); }\r\n            100% { transform: rotate(360deg); }\r\n          }\r\n        `}</style>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/auth\" replace />\r\n  }\r\n\r\n  return children\r\n}\r\n\r\nexport default ProtectedRoute "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}